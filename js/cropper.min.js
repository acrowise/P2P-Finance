(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof exports==="object"){a(require("jquery"))}else{a(jQuery)}}})(function(E){var M=E(window),v=E(document),p=window.location,h=".cropper",Q="preview"+h,j=/^(e|n|w|s|ne|nw|sw|se|all|crop|move|zoom)$/,S="cropper-modal",D="cropper-hide",I="cropper-hidden",K="cropper-invisible",e="cropper-move",J="cropper-crop",H="cropper-disabled",a="cropper-bg",o="mousedown touchstart",t="mousemove touchmove",N="mouseup mouseleave touchend touchleave touchcancel",g="wheel mousewheel DOMMouseScroll",i="dblclick",b="resize"+h,C="build"+h,s="built"+h,B="dragstart"+h,z="dragmove"+h,m="dragend"+h,A="zoomin"+h,R="zoomout"+h,c=E.isFunction(E("<canvas>")[0].getContext),G=Math.sqrt,T=Math.min,w=Math.max,y=Math.abs,n=Math.sin,f=Math.cos,O=parseFloat,r={};function U(W){return typeof W==="number"}function q(W){return typeof W==="undefined"}function u(X,Y){var W=[];if(U(Y)){W.push(Y)}return W.slice.apply(X,W)}function L(Y,X){var W=u(arguments,2);return function(){return Y.apply(X,W.concat(u(arguments)))}}function P(W){var X=W.match(/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i);return X&&(X[1]!==p.protocol||X[2]!==p.hostname||X[3]!==p.port)}function l(W){var X="timestamp="+(new Date()).getTime();return(W+(W.indexOf("?")===-1?"?":"&")+X)}function V(W,X){return X.left<0&&W.width<(X.left+X.width)&&X.top<0&&W.height<(X.top+X.height)}function k(W){return W?"rotate("+W+"deg)":"none"}function d(ab,ac){var X=y(ab.degree)%180,Z=(X>90?(180-X):X)*Math.PI/180,ad=n(Z),af=f(Z),Y=ab.width,ag=ab.height,ae=ab.aspectRatio,aa,W;if(!ac){aa=Y*af+ag*ad;W=Y*ad+ag*af}else{aa=Y/(af+ad/ae);W=aa/ae}return{width:aa,height:W}}function F(ad,ac){var Z=E("<canvas>")[0],aa=Z.getContext("2d"),ab=ac.naturalWidth,W=ac.naturalHeight,Y=ac.rotate,X=d({width:ab,height:W,degree:Y});if(Y){Z.width=X.width;Z.height=X.height;aa.save();aa.translate(X.width/2,X.height/2);aa.rotate(Y*Math.PI/180);aa.drawImage(ad,-ab/2,-W/2,ab,W);aa.restore()}else{Z.width=ab;Z.height=W;aa.drawImage(ad,0,0,ab,W)}return Z}function x(X,W){this.$element=E(X);this.options=E.extend({},x.DEFAULTS,E.isPlainObject(W)&&W);this.ready=false;this.built=false;this.rotated=false;this.cropped=false;this.disabled=false;this.canvas=null;this.cropBox=null;this.load()}r.load=function(aa){var Z=this.options,ac=this.$element,W,Y,X,ab;if(!aa){if(ac.is("img")){if(!ac.attr("src")){return}aa=ac.prop("src")}else{if(ac.is("canvas")&&c){aa=ac[0].toDataURL()}}}if(!aa){return}X=E.Event(C);ac.one(C,Z.build).trigger(X);if(X.isDefaultPrevented()){return}if(Z.checkImageOrigin&&P(aa)){W="anonymous";if(!ac.prop("crossOrigin")){Y=l(aa)}}this.$clone=ab=E("<img>");ab.one("load",E.proxy(function(){var ad=ab.prop("naturalWidth")||ab.width(),ae=ab.prop("naturalHeight")||ab.height();this.image={naturalWidth:ad,naturalHeight:ae,aspectRatio:ad/ae,rotate:0};this.url=aa;this.ready=true;this.build()},this)).one("error",function(){ab.remove()}).attr({src:Y||aa,crossOrigin:W});ab.addClass(D).insertAfter(ac)};r.build=function(){var aa=this.$element,Z=this.$clone,Y=this.options,X,W;if(!this.ready){return}if(this.built){this.unbuild()}this.$cropper=X=E(x.TEMPLATE);aa.addClass(I);Z.removeClass(D);this.$container=aa.parent().append(X);this.$canvas=X.find(".cropper-canvas").append(Z);this.$dragBox=X.find(".cropper-drag-box");this.$cropBox=W=X.find(".cropper-crop-box");this.$viewBox=X.find(".cropper-view-box");this.addListeners();this.initPreview();Y.aspectRatio=O(Y.aspectRatio)||NaN;if(Y.autoCrop){this.cropped=true;if(Y.modal){this.$dragBox.addClass(S)}}else{W.addClass(I)}if(Y.background){X.addClass(a)}if(!Y.highlight){W.find(".cropper-face").addClass(K)}if(!Y.guides){W.find(".cropper-dashed").addClass(I)}if(!Y.movable){W.find(".cropper-face").data("drag","move")}if(!Y.resizable){W.find(".cropper-line, .cropper-point").addClass(I)}this.setDragMode(Y.dragCrop?"crop":"move");this.built=true;this.render();aa.one(s,Y.built).trigger(s)};r.unbuild=function(){if(!this.built){return}this.built=false;this.container=null;this.canvas=null;this.cropBox=null;this.removeListeners();this.resetPreview();this.$preview=null;this.$viewBox=null;this.$cropBox=null;this.$dragBox=null;this.$canvas=null;this.$container=null;this.$cropper.remove();this.$cropper=null};E.extend(r,{render:function(){this.initContainer();this.initCanvas();this.initCropBox();this.renderCanvas();if(this.cropped){this.renderCropBox()}},initContainer:function(){var Y=this.$element,Z=this.$container,W=this.$cropper,X=this.options;W.addClass(I);Y.removeClass(I);W.css((this.container={width:w(Z.width(),O(X.minContainerWidth)||200),height:w(Z.height(),O(X.minContainerHeight)||100)}));Y.addClass(I);W.removeClass(I)},initCanvas:function(){var W=this.container,aa=W.width,Z=W.height,ab=this.image,Y=ab.aspectRatio,X={aspectRatio:Y,width:aa,height:Z};if(Z*Y>aa){X.height=aa/Y}else{X.width=Z*Y}X.oldLeft=X.left=(aa-X.width)/2;X.oldTop=X.top=(Z-X.height)/2;this.canvas=X;this.limitCanvas(true,true);this.initialImage=E.extend({},ab);this.initialCanvas=E.extend({},X)},limitCanvas:function(ah,Z){var ai=this.options,ad=ai.strict,W=this.container,ac=W.width,ag=W.height,X=this.canvas,ae=X.aspectRatio,Y=this.cropBox,ab=this.cropped&&Y,af,aa;if(ah){af=O(ai.minCanvasWidth)||0;aa=O(ai.minCanvasHeight)||0;if(af){if(ad){af=w(ab?Y.width:ac,af)}aa=af/ae}else{if(aa){if(ad){aa=w(ab?Y.height:ag,aa)}af=aa*ae}else{if(ad){if(ab){af=Y.width;aa=Y.height;if(aa*ae>af){af=aa*ae}else{aa=af/ae}}else{af=ac;aa=ag;if(aa*ae>af){aa=af/ae}else{af=aa*ae}}}}}E.extend(X,{minWidth:af,minHeight:aa,maxWidth:Infinity,maxHeight:Infinity})}if(Z){if(ad){if(ab){X.minLeft=T(Y.left,(Y.left+Y.width)-X.width);X.minTop=T(Y.top,(Y.top+Y.height)-X.height);X.maxLeft=Y.left;X.maxTop=Y.top}else{X.minLeft=T(0,ac-X.width);X.minTop=T(0,ag-X.height);X.maxLeft=w(0,ac-X.width);X.maxTop=w(0,ag-X.height)}}else{X.minLeft=-X.width;X.minTop=-X.height;X.maxLeft=ac;X.maxTop=ag}}},renderCanvas:function(ab){var Y=this.options,X=this.canvas,aa=this.image,Z,W;if(this.rotated){this.rotated=false;W=d({width:aa.width,height:aa.height,degree:aa.rotate});Z=W.width/W.height;if(Z!==X.aspectRatio){X.left-=(W.width-X.width)/2;X.top-=(W.height-X.height)/2;X.width=W.width;X.height=W.height;X.aspectRatio=Z;this.limitCanvas(true,false)}}if(X.width>X.maxWidth||X.width<X.minWidth){X.left=X.oldLeft}if(X.height>X.maxHeight||X.height<X.minHeight){X.top=X.oldTop}X.width=T(w(X.width,X.minWidth),X.maxWidth);X.height=T(w(X.height,X.minHeight),X.maxHeight);this.limitCanvas(false,true);X.oldLeft=X.left=T(w(X.left,X.minLeft),X.maxLeft);X.oldTop=X.top=T(w(X.top,X.minTop),X.maxTop);this.$canvas.css({width:X.width,height:X.height,left:X.left,top:X.top});this.renderImage();if(this.cropped&&Y.strict&&!V(this.container,X)){this.limitCropBox(true,true)}if(ab){this.output()}},renderImage:function(){var W=this.canvas,X=this.image,Y;if(X.rotate){Y=d({width:W.width,height:W.height,degree:X.rotate,aspectRatio:X.aspectRatio},true)}E.extend(X,Y?{width:Y.width,height:Y.height,left:(W.width-Y.width)/2,top:(W.height-Y.height)/2}:{width:W.width,height:W.height,left:0,top:0});this.$clone.css({width:X.width,height:X.height,marginLeft:X.left,marginTop:X.top,transform:k(X.rotate)})},initCropBox:function(){var X=this.options,W=this.canvas,Z=X.aspectRatio,aa=O(X.autoCropArea)||0.8,Y={width:W.width,height:W.height};if(Z){if(W.height*Z>W.width){Y.height=Y.width/Z}else{Y.width=Y.height*Z}}this.cropBox=Y;this.limitCropBox(true,true);Y.width=T(w(Y.width,Y.minWidth),Y.maxWidth);Y.height=T(w(Y.height,Y.minHeight),Y.maxHeight);Y.width=w(Y.minWidth,Y.width*aa);Y.height=w(Y.minHeight,Y.height*aa);Y.oldLeft=Y.left=W.left+(W.width-Y.width)/2;Y.oldTop=Y.top=W.top+(W.height-Y.height)/2;this.initialCropBox=E.extend({},Y)},limitCropBox:function(ag,aa){var ah=this.options,ad=ah.strict,X=this.container,ac=X.width,af=X.height,Y=this.canvas,Z=this.cropBox,ae=ah.aspectRatio,W,ab;if(ag){W=O(ah.minCropBoxWidth)||0;ab=O(ah.minCropBoxHeight)||0;Z.minWidth=T(ac,W);Z.minHeight=T(af,ab);Z.maxWidth=T(ac,ad?Y.width:ac);Z.maxHeight=T(af,ad?Y.height:af);if(ae){if(Z.maxHeight*ae>Z.maxWidth){Z.minHeight=Z.minWidth/ae;Z.maxHeight=Z.maxWidth/ae}else{Z.minWidth=Z.minHeight*ae;Z.maxWidth=Z.maxHeight*ae}}Z.minWidth=T(Z.maxWidth,Z.minWidth);Z.minHeight=T(Z.maxHeight,Z.minHeight)}if(aa){if(ad){Z.minLeft=w(0,Y.left);Z.minTop=w(0,Y.top);Z.maxLeft=T(ac,Y.left+Y.width)-Z.width;Z.maxTop=T(af,Y.top+Y.height)-Z.height}else{Z.minLeft=0;Z.minTop=0;Z.maxLeft=ac-Z.width;Z.maxTop=af-Z.height}}},renderCropBox:function(){var Y=this.options,W=this.container,ab=W.width,aa=W.height,X=this.$cropBox,Z=this.cropBox;if(Z.width>Z.maxWidth||Z.width<Z.minWidth){Z.left=Z.oldLeft}if(Z.height>Z.maxHeight||Z.height<Z.minHeight){Z.top=Z.oldTop}Z.width=T(w(Z.width,Z.minWidth),Z.maxWidth);Z.height=T(w(Z.height,Z.minHeight),Z.maxHeight);this.limitCropBox(false,true);Z.oldLeft=Z.left=T(w(Z.left,Z.minLeft),Z.maxLeft);Z.oldTop=Z.top=T(w(Z.top,Z.minTop),Z.maxTop);if(Y.movable){X.find(".cropper-face").data("drag",(Z.width===ab&&Z.height===aa)?"move":"all")}X.css({width:Z.width,height:Z.height,left:Z.left,top:Z.top});if(this.cropped&&Y.strict&&!V(W,this.canvas)){this.limitCanvas(true,true)}if(!this.disabled){this.output()}},output:function(){var W=this.options;this.preview();if(W.crop){W.crop.call(this.$element,this.getData())}}});r.initPreview=function(){var W=this.url;this.$preview=E(this.options.preview);this.$viewBox.html('<img src="'+W+'">');this.$preview.each(function(){var X=E(this);X.data(Q,{width:X.width(),height:X.height(),original:X.html()}).html('<img src="'+W+'" style="display:block;width:100%;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation: 0deg!important">')})};r.resetPreview=function(){this.$preview.each(function(){var W=E(this);W.html(W.data(Q).original).removeData(Q)})};r.preview=function(){var ad=this.image,Y=this.canvas,aa=this.cropBox,Z=ad.width,W=ad.height,ac=aa.left-Y.left-ad.left,ab=aa.top-Y.top-ad.top,X=ad.rotate;if(!this.cropped||this.disabled){return}this.$viewBox.find("img").css({width:Z,height:W,marginLeft:-ac,marginTop:-ab,transform:k(X)});this.$preview.each(function(){var ai=E(this),ah=ai.data(Q),af=ah.width/aa.width,ag=ah.width,ae=aa.height*af;if(ae>ah.height){af=ah.height/aa.height;ag=aa.width*af;ae=ah.height}ai.width(ag).height(ae).find("img").css({width:Z*af,height:W*af,marginLeft:-ac*af,marginTop:-ab*af,transform:k(X)})})};r.addListeners=function(){var W=this.options;this.$element.on(B,W.dragstart).on(z,W.dragmove).on(m,W.dragend).on(A,W.zoomin).on(R,W.zoomout);this.$cropper.on(o,E.proxy(this.dragstart,this)).on(i,E.proxy(this.dblclick,this));if(W.zoomable&&W.mouseWheelZoom){this.$cropper.on(g,E.proxy(this.wheel,this))}v.on(t,(this._dragmove=L(this.dragmove,this))).on(N,(this._dragend=L(this.dragend,this)));if(W.responsive){M.on(b,(this._resize=L(this.resize,this)))}};r.removeListeners=function(){var W=this.options;this.$element.off(B,W.dragstart).off(z,W.dragmove).off(m,W.dragend).off(A,W.zoomin).off(R,W.zoomout);this.$cropper.off(o,this.dragstart).off(i,this.dblclick);if(W.zoomable&&W.mouseWheelZoom){this.$cropper.off(g,this.wheel)}v.off(t,this._dragmove).off(N,this._dragend);if(W.responsive){M.off(b,this._resize)}};E.extend(r,{resize:function(){var aa=this.$container,W=this.container,X,Z,Y;if(this.disabled){return}Y=aa.width()/W.width;if(Y!==1||aa.height()!==W.height){X=this.getCanvasData();Z=this.getCropBoxData();this.render();this.setCanvasData(E.each(X,function(ab,ac){X[ab]=ac*Y}));this.setCropBoxData(E.each(Z,function(ab,ac){Z[ab]=ac*Y}))}},dblclick:function(){if(this.disabled){return}if(this.$dragBox.hasClass(J)){this.setDragMode("move")}else{this.setDragMode("crop")}},wheel:function(W){var X=W.originalEvent,Y=1;if(this.disabled){return}W.preventDefault();if(X.deltaY){Y=X.deltaY>0?1:-1}else{if(X.wheelDelta){Y=-X.wheelDelta/120}else{if(X.detail){Y=X.detail>0?1:-1}}}this.zoom(-Y*0.1)},dragstart:function(ab){var Y=this.options,W=ab.originalEvent,ad=W&&W.touches,ac=ab,aa,Z,X;if(this.disabled){return}if(ad){X=ad.length;if(X>1){if(Y.zoomable&&Y.touchDragZoom&&X===2){ac=ad[1];this.startX2=ac.pageX;this.startY2=ac.pageY;aa="zoom"}else{return}}ac=ad[0]}aa=aa||E(ac.target).data("drag");if(j.test(aa)){ab.preventDefault();Z=E.Event(B,{originalEvent:W,dragType:aa});this.$element.trigger(Z);if(Z.isDefaultPrevented()){return}this.dragType=aa;this.cropping=false;this.startX=ac.pageX;this.startY=ac.pageY;if(aa==="crop"){this.cropping=true;this.$dragBox.addClass(S)}}},dragmove:function(aa){var Y=this.options,W=aa.originalEvent,ad=W&&W.touches,ac=aa,Z=this.dragType,ab,X;if(this.disabled){return}if(ad){X=ad.length;if(X>1){if(Y.zoomable&&Y.touchDragZoom&&X===2){ac=ad[1];this.endX2=ac.pageX;this.endY2=ac.pageY}else{return}}ac=ad[0]}if(Z){aa.preventDefault();ab=E.Event(z,{originalEvent:W,dragType:Z});this.$element.trigger(ab);if(ab.isDefaultPrevented()){return}this.endX=ac.pageX;this.endY=ac.pageY;this.change()}},dragend:function(X){var W=this.dragType,Y;if(this.disabled){return}if(W){X.preventDefault();Y=E.Event(m,{originalEvent:X.originalEvent,dragType:W});this.$element.trigger(Y);if(Y.isDefaultPrevented()){return}if(this.cropping){this.cropping=false;this.$dragBox.toggleClass(S,this.cropped&&this.options.modal)}this.dragType=""}}});E.extend(r,{reset:function(){if(!this.built||this.disabled){return}this.image=E.extend({},this.initialImage);this.canvas=E.extend({},this.initialCanvas);this.renderCanvas();if(this.cropped){this.cropBox=E.extend({},this.initialCropBox);this.renderCropBox()}},clear:function(){if(!this.cropped||this.disabled){return}E.extend(this.cropBox,{left:0,top:0,width:0,height:0});this.cropped=false;this.renderCropBox();this.limitCanvas();this.renderCanvas();this.$dragBox.removeClass(S);this.$cropBox.addClass(I)},destroy:function(){var W=this.$element;if(this.ready){this.unbuild();W.removeClass(I)}else{this.$clone.off("load").remove()}W.removeData("cropper")},replace:function(W){if(!this.disabled&&W){this.load(W)}},enable:function(){if(this.built){this.disabled=false;this.$cropper.removeClass(H)}},disable:function(){if(this.built){this.disabled=true;this.$cropper.addClass(H)}},move:function(W,Y){var X=this.canvas;if(this.built&&!this.disabled&&U(W)&&U(Y)){X.left+=W;X.top+=Y;this.renderCanvas(true)}},zoom:function(aa){var X=this.canvas,Z,Y,W;aa=O(aa);if(aa&&this.built&&!this.disabled&&this.options.zoomable){Z=aa>0?E.Event(A):E.Event(R);this.$element.trigger(Z);if(Z.isDefaultPrevented()){return}aa=aa<=-1?1/(1-aa):aa<=1?(1+aa):aa;Y=X.width*aa;W=X.height*aa;X.left-=(Y-X.width)/2;X.top-=(W-X.height)/2;X.width=Y;X.height=W;this.renderCanvas(true);this.setDragMode("move")}},rotate:function(X){var W=this.image;X=O(X);if(X&&this.built&&!this.disabled&&this.options.rotatable){W.rotate=(W.rotate+X)%360;this.rotated=true;this.renderCanvas(true)}},getData:function(){var Y=this.cropBox,W=this.canvas,aa=this.image,X,Z;if(this.built&&this.cropped){Z={x:Y.left-W.left,y:Y.top-W.top,width:Y.width,height:Y.height};X=aa.width/aa.naturalWidth;E.each(Z,function(ab,ac){ac=ac/X;Z[ab]=ac})}else{Z={x:0,y:0,width:0,height:0}}Z.rotate=aa.rotate;return Z},getContainerData:function(){return this.built?this.container:{}},getImageData:function(){return this.ready?this.image:{}},getCanvasData:function(){var W=this.canvas,X;if(this.built){X={left:W.left,top:W.top,width:W.width,height:W.height}}return X||{}},setCanvasData:function(Y){var W=this.canvas,X=W.aspectRatio;if(this.built&&!this.disabled&&E.isPlainObject(Y)){if(U(Y.left)){W.left=Y.left}if(U(Y.top)){W.top=Y.top}if(U(Y.width)){W.width=Y.width;W.height=Y.width/X}else{if(U(Y.height)){W.height=Y.height;W.width=Y.height*X}}this.renderCanvas(true)}},getCropBoxData:function(){var W=this.cropBox,X;if(this.built&&this.cropped){X={left:W.left,top:W.top,width:W.width,height:W.height}}return X||{}},setCropBoxData:function(Y){var W=this.cropBox,X=this.options.aspectRatio;if(this.built&&this.cropped&&!this.disabled&&E.isPlainObject(Y)){if(U(Y.left)){W.left=Y.left}if(U(Y.top)){W.top=Y.top}if(X){if(U(Y.width)){W.width=Y.width;W.height=W.width/X}else{if(U(Y.height)){W.height=Y.height;W.width=W.height*X}}}else{if(U(Y.width)){W.width=Y.width}if(U(Y.height)){W.height=Y.height}}this.renderCropBox()}},getCroppedCanvas:function(ah){var X,ab,Z,ad,ac,ae,ag,af,Y,W,aa;if(!this.built||!this.cropped||!c){return}if(!E.isPlainObject(ah)){ah={}}aa=this.getData();X=aa.width;ab=aa.height;af=X/ab;if(E.isPlainObject(ah)){ac=ah.width;ae=ah.height;if(ac){ae=ac/af;ag=ac/X}else{if(ae){ac=ae*af;ag=ae/ab}}}Z=ac||X;ad=ae||ab;Y=E("<canvas>")[0];Y.width=Z;Y.height=ad;W=Y.getContext("2d");if(ah.fillColor){W.fillStyle=ah.fillColor;W.fillRect(0,0,Z,ad)}W.drawImage.apply(W,(function(){var ai=F(this.$clone[0],this.image),aj=ai.width,ak=ai.height,ao=[ai],an=aa.x,am=aa.y,al,au,ar,aq,at,ap;if(an<=-X||an>aj){an=al=ar=at=0}else{if(an<=0){ar=-an;an=0;al=at=T(aj,X+an)}else{if(an<=aj){ar=0;al=at=T(X,aj-an)}}}if(al<=0||am<=-ab||am>ak){am=au=aq=ap=0}else{if(am<=0){aq=-am;am=0;au=ap=T(ak,ab+am)}else{if(am<=ak){aq=0;au=ap=T(ab,ak-am)}}}ao.push(an,am,al,au);if(ag){ar*=ag;aq*=ag;at*=ag;ap*=ag}if(at>0&&ap>0){ao.push(ar,aq,at,ap)}return ao}).call(this));return Y},setAspectRatio:function(X){var W=this.options;if(!this.disabled&&!q(X)){W.aspectRatio=O(X)||NaN;if(this.built){this.initCropBox();if(this.cropped){this.renderCropBox()}}}},setDragMode:function(Z){var X=this.$dragBox,W=false,Y=false;if(!this.ready||this.disabled){return}switch(Z){case"crop":if(this.options.dragCrop){W=true;X.data("drag",Z)}else{Y=true}break;case"move":Y=true;X.data("drag",Z);break;default:X.removeData("drag")}X.toggleClass(J,W).toggleClass(e,Y)}});r.change=function(){var ad=this.dragType,Z=this.options,Y=this.canvas,af=this.container,W=this.cropBox,al=W.width,ai=W.height,aa=W.left,ah=W.top,ao=aa+al,ac=ah+ai,aj=0,ae=0,an=af.width,ak=af.height,am=true,X=Z.aspectRatio,ag={x:this.endX-this.startX,y:this.endY-this.startY},ab;if(Z.strict){aj=W.minLeft;ae=W.minTop;an=aj+T(af.width,Y.width);ak=ae+T(af.height,Y.height)}if(X){ag.X=ag.y*X;ag.Y=ag.x/X}switch(ad){case"all":aa+=ag.x;ah+=ag.y;break;case"e":if(ag.x>=0&&(ao>=an||X&&(ah<=ae||ac>=ak))){am=false;break}al+=ag.x;if(X){ai=al/X;ah-=ag.Y/2}if(al<0){ad="w";al=0}break;case"n":if(ag.y<=0&&(ah<=ae||X&&(aa<=aj||ao>=an))){am=false;break}ai-=ag.y;ah+=ag.y;if(X){al=ai*X;aa+=ag.X/2}if(ai<0){ad="s";ai=0}break;case"w":if(ag.x<=0&&(aa<=aj||X&&(ah<=ae||ac>=ak))){am=false;break}al-=ag.x;aa+=ag.x;if(X){ai=al/X;ah+=ag.Y/2}if(al<0){ad="e";al=0}break;case"s":if(ag.y>=0&&(ac>=ak||X&&(aa<=aj||ao>=an))){am=false;break}ai+=ag.y;if(X){al=ai*X;aa-=ag.X/2}if(ai<0){ad="n";ai=0}break;case"ne":if(X){if(ag.y<=0&&(ah<=ae||ao>=an)){am=false;break}ai-=ag.y;ah+=ag.y;al=ai*X}else{if(ag.x>=0){if(ao<an){al+=ag.x}else{if(ag.y<=0&&ah<=ae){am=false}}}else{al+=ag.x}if(ag.y<=0){if(ah>0){ai-=ag.y;ah+=ag.y}}else{ai-=ag.y;ah+=ag.y}}if(al<0&&ai<0){ad="sw";ai=0;al=0}else{if(al<0){ad="nw";al=0}else{if(ai<0){ad="se";ai=0}}}break;case"nw":if(X){if(ag.y<=0&&(ah<=ae||aa<=aj)){am=false;break}ai-=ag.y;ah+=ag.y;al=ai*X;aa+=ag.X}else{if(ag.x<=0){if(aa>0){al-=ag.x;aa+=ag.x}else{if(ag.y<=0&&ah<=ae){am=false}}}else{al-=ag.x;aa+=ag.x}if(ag.y<=0){if(ah>0){ai-=ag.y;ah+=ag.y}}else{ai-=ag.y;ah+=ag.y}}if(al<0&&ai<0){ad="se";ai=0;al=0}else{if(al<0){ad="ne";al=0}else{if(ai<0){ad="sw";ai=0}}}break;case"sw":if(X){if(ag.x<=0&&(aa<=aj||ac>=ak)){am=false;break}al-=ag.x;aa+=ag.x;ai=al/X}else{if(ag.x<=0){if(aa>0){al-=ag.x;aa+=ag.x}else{if(ag.y>=0&&ac>=ak){am=false}}}else{al-=ag.x;aa+=ag.x}if(ag.y>=0){if(ac<ak){ai+=ag.y}}else{ai+=ag.y}}if(al<0&&ai<0){ad="ne";ai=0;al=0}else{if(al<0){ad="se";al=0}else{if(ai<0){ad="nw";ai=0}}}break;case"se":if(X){if(ag.x>=0&&(ao>=an||ac>=ak)){am=false;break}al+=ag.x;ai=al/X}else{if(ag.x>=0){if(ao<an){al+=ag.x}else{if(ag.y>=0&&ac>=ak){am=false}}}else{al+=ag.x}if(ag.y>=0){if(ac<ak){ai+=ag.y}}else{ai+=ag.y}}if(al<0&&ai<0){ad="nw";ai=0;al=0}else{if(al<0){ad="sw";al=0}else{if(ai<0){ad="ne";ai=0}}}break;case"move":Y.left+=ag.x;Y.top+=ag.y;this.renderCanvas(true);am=false;break;case"zoom":this.zoom(function(aq,at,ap,ar){var av=G(aq*aq+at*at),au=G(ap*ap+ar*ar);return(au-av)/av}(y(this.startX-this.startX2),y(this.startY-this.startY2),y(this.endX-this.endX2),y(this.endY-this.endY2)));this.startX2=this.endX2;this.startY2=this.endY2;am=false;break;case"crop":if(ag.x&&ag.y){ab=this.$cropper.offset();aa=this.startX-ab.left;ah=this.startY-ab.top;al=W.minWidth;ai=W.minHeight;if(ag.x>0){if(ag.y>0){ad="se"}else{ad="ne";ah-=ai}}else{if(ag.y>0){ad="sw";aa-=al}else{ad="nw";aa-=al;ah-=ai}}if(!this.cropped){this.cropped=true;this.$cropBox.removeClass(I)}}break}if(am){W.width=al;W.height=ai;W.left=aa;W.top=ah;this.dragType=ad;this.renderCropBox()}this.startX=this.endX;this.startY=this.endY};E.extend(x.prototype,r);x.DEFAULTS={aspectRatio:NaN,autoCropArea:0.8,crop:null,preview:"",strict:true,responsive:true,checkImageOrigin:true,modal:true,guides:true,highlight:true,background:true,autoCrop:true,dragCrop:true,movable:true,resizable:true,rotatable:true,zoomable:true,touchDragZoom:true,mouseWheelZoom:true,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,build:null,built:null,dragstart:null,dragmove:null,dragend:null,zoomin:null,zoomout:null};x.setDefaults=function(W){E.extend(x.DEFAULTS,W)};x.TEMPLATE=(function(W,X){X=X.split(",");return W.replace(/\d+/g,function(Y){return X[Y]})})('<0 6="5-container"><0 6="5-canvas"></0><0 6="5-2-9" 3-2="move"></0><0 6="5-crop-9"><1 6="5-view-9"></1><1 6="5-8 8-h"></1><1 6="5-8 8-v"></1><1 6="5-face" 3-2="all"></1><1 6="5-7 7-e" 3-2="e"></1><1 6="5-7 7-n" 3-2="n"></1><1 6="5-7 7-w" 3-2="w"></1><1 6="5-7 7-s" 3-2="s"></1><1 6="5-4 4-e" 3-2="e"></1><1 6="5-4 4-n" 3-2="n"></1><1 6="5-4 4-w" 3-2="w"></1><1 6="5-4 4-s" 3-2="s"></1><1 6="5-4 4-ne" 3-2="ne"></1><1 6="5-4 4-nw" 3-2="nw"></1><1 6="5-4 4-sw" 3-2="sw"></1><1 6="5-4 4-se" 3-2="se"></1></0></0>',"div,span,drag,data,point,cropper,class,line,dashed,box");x.other=E.fn.cropper;E.fn.cropper=function(Y){var X=u(arguments,1),W;this.each(function(){var ab=E(this),aa=ab.data("cropper"),Z;if(!aa){ab.data("cropper",(aa=new x(this,Y)))}if(typeof Y==="string"&&E.isFunction((Z=aa[Y]))){W=Z.apply(aa,X)}});return q(W)?this:W};E.fn.cropper.Constructor=x;E.fn.cropper.setDefaults=x.setDefaults;E.fn.cropper.noConflict=function(){E.fn.cropper=x.other;return this}});